<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“˜ å€‹äººåŒ–å¤šç›Šæ–‡æ³•å­¸ç¿’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @font-face {
        font-family: 'LucideIcons';
        src: url(https://cdn.jsdelivr.net/npm/lucide-static@latest/font/Lucide.ttf) format('truetype');
      }
      .lucide {
        font-family: 'LucideIcons';
        font-size: 1.25rem; /* Adjust icon size as needed */
        line-height: 1;
      }
      /* Custom Duolingo-like styles */
      :root {
        --duo-green: #58cc02;
        --duo-blue: #1cb0f6;
        --duo-red: #ff4b4b;
        --duo-gray: #e5e5e5;
        --duo-dark-gray: #777777;
        --duo-text: #4b4b4b;
      }
      body {
        font-family: "Inter", sans-serif; /* Using Inter font */
        color: var(--duo-text);
      }
      .btn {
        @apply block w-full text-center font-bold py-3 px-4 rounded-xl border-b-4 transition-transform duration-150 ease-in-out;
      }
      .btn-primary {
        @apply bg-duo-green text-white border-green-700 hover:bg-green-600 active:translate-y-0.5 active:border-b-2;
      }
      .btn-secondary {
        @apply bg-white text-duo-blue border-2 border-duo-gray hover:bg-gray-100 active:translate-y-0.5 active:border-b-2;
      }
      .btn-disabled {
         @apply bg-duo-gray text-duo-dark-gray border-gray-400 cursor-not-allowed opacity-70;
      }
      .card {
        @apply bg-white p-6 rounded-xl border border-duo-gray shadow-sm mb-6;
      }
      .feedback {
        @apply mt-4 p-4 rounded-lg font-bold text-white text-center;
      }
      .feedback-correct {
        @apply bg-duo-green;
      }
      .feedback-incorrect {
        @apply bg-duo-red;
      }
      /* Style for selected answer */
      .option-selected {
        @apply bg-blue-100 border-duo-blue ring-2 ring-duo-blue;
      }
       /* Style for correct answer highlight */
      .option-correct {
        @apply bg-green-100 border-duo-green text-green-800 ring-2 ring-duo-green;
      }
       /* Style for incorrect answer highlight */
      .option-incorrect {
        @apply bg-red-100 border-duo-red text-red-800 ring-2 ring-duo-red;
      }
    </style>
</head>
<body class="bg-gray-50">

    <div class="container mx-auto max-w-2xl p-4">

        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-duo-green mb-2">ğŸ“˜ å€‹äººåŒ–å¤šç›Šæ–‡æ³•å­¸ç¿’</h1>
            <p class="text-duo-dark-gray">é‡å°æ‚¨çš„å¼±é»é€²è¡ŒåŠ å¼·ï¼</p>
        </header>

        <nav class="mb-8">
            <label for="section-select" class="block text-sm font-medium text-gray-700 mb-1">é¸æ“‡å­¸ç¿’å–®å…ƒ:</label>
            <select id="section-select" class="block w-full p-3 border border-duo-gray rounded-lg focus:ring-duo-blue focus:border-duo-blue">
                </select>
        </nav>

        <main id="content-area">
            </main>

        <footer id="summary-area" class="mt-12 card hidden">
             <h2 class="text-2xl font-bold mb-4 flex items-center"><span class="lucide mr-2">ğŸ’¡</span>é‡é»ç¸½çµ</h2>
             <ul id="summary-list" class="list-disc pl-5 space-y-2 text-duo-text">
                 </ul>
        </footer>

    </div>

    <script>
        // --- Content Data (Parsed from Markdown) ---
        const learningData = {
            sections: [
                {
                    id: "tenses",
                    title: "â° å‹•è©æ™‚æ…‹ (Verb Tenses)",
                    errorAnalysis: [
                        "æœªèƒ½æ ¹æ“šæ™‚é–“å‰¯è©ï¼ˆå¦‚ \"last week\", \"over the past five years\"ï¼‰é¸æ“‡æ­£ç¢ºçš„æ™‚æ…‹ï¼ˆéå»ç°¡å–®å¼ vs. ç¾åœ¨å®Œæˆå¼ï¼‰ã€‚",
                        "åœ¨è¡¨ç¤ºæ™‚é–“å…ˆå¾Œé †åºçš„å­å¥ä¸­ï¼ˆå¦‚ \"After you...\"ï¼‰ï¼Œæœªèƒ½æ­£ç¢ºä½¿ç”¨å®Œæˆå¼è¡¨é”å‹•ä½œçš„å…ˆå¾Œã€‚",
                        "åœ¨æè¿°è®ŠåŒ–çš„éç¨‹æ™‚ï¼ˆå¦‚ \"As parts of the world...\"ï¼‰ï¼Œæœªèƒ½é¸æ“‡åˆé©çš„æ™‚æ…‹ï¼ˆä¸€èˆ¬ç¾åœ¨å¼ vs. ç¾åœ¨é€²è¡Œå¼ï¼‰ã€‚"
                    ],
                    rules: [
                        {
                            name: "éå»ç°¡å–®å¼ (Past Simple)",
                            details: [
                                "**å®šç¾©èˆ‡ç”¨æ³•ï¼š** è¡¨ç¤ºéå»æŸç‰¹å®šæ™‚é–“é»ç™¼ç”Ÿçš„å‹•ä½œæˆ–å­˜åœ¨çš„ç‹€æ…‹ã€‚",
                                "**çµæ§‹ï¼š** å‹•è©éå»å¼ (V-ed æˆ–ä¸è¦å‰‡è®ŠåŒ–)ã€‚",
                                "**å¸¸è¦‹æ™‚é–“å‰¯è©ï¼š** yesterday, last week/month/year, ... ago, in + éå»å¹´ä»½, thenã€‚",
                                "**è€ƒé»ï¼š** çœ‹åˆ°æ˜ç¢ºçš„éå»æ™‚é–“é»å‰¯è©ï¼Œé€šå¸¸è¦é¸éå»ç°¡å–®å¼ã€‚",
                                "**ä¾‹å¥ï¼š** The firm **announced** last week that it will broaden its marketing scale."
                            ]
                        },
                        {
                            name: "ç¾åœ¨å®Œæˆå¼ (Present Perfect)",
                            details: [
                                "**å®šç¾©èˆ‡ç”¨æ³•ï¼š** 1. è¡¨ç¤ºå¾éå»æŸå€‹æ™‚é–“é»é–‹å§‹ã€æŒçºŒåˆ°ç¾åœ¨çš„å‹•ä½œæˆ–ç‹€æ…‹ã€‚ 2. è¡¨ç¤ºéå»ç™¼ç”Ÿã€ä½†å°ç¾åœ¨æœ‰å½±éŸ¿æˆ–çµæœçš„å‹•ä½œã€‚ 3. è¡¨ç¤ºåœ¨æŸå€‹éå»æ™‚é–“é»ä¹‹å‰å®Œæˆçš„å‹•ä½œï¼ˆç›¸å°æ–¼å¦ä¸€å€‹éå»æˆ–ç¾åœ¨çš„å‹•ä½œï¼‰ã€‚",
                                "**çµæ§‹ï¼š** have/has + éå»åˆ†è© (Past Participle)ã€‚",
                                "**å¸¸è¦‹æ™‚é–“å‰¯è©ï¼š** since..., for..., over the past/last + æ™‚é–“æ®µ, already, yet, just, recently, lately, up to nowã€‚",
                                "**è€ƒé»ï¼š** çœ‹åˆ° \"since\", \"for\", \"over the past...\" ç­‰è¡¨ç¤ºä¸€æ®µæ™‚é–“çš„è©èªï¼Œå¸¸é¸ç¾åœ¨å®Œæˆå¼ã€‚åœ¨ \"After/Before\" å­å¥ä¸­ï¼Œè‹¥è¦å¼·èª¿æŸå‹•ä½œåœ¨ä¸»è¦å­å¥å‹•ä½œä¹‹å‰å®Œæˆï¼Œå¯ç”¨ç¾åœ¨å®Œæˆå¼ã€‚",
                                "**ä¾‹å¥ï¼š** Taylor Swift **has received** multiple awards over the past five years. After you **have completed** the attached form, please send it to us."
                            ]
                        },
                         {
                            name: "ä¸€èˆ¬ç¾åœ¨å¼ (Simple Present)",
                            details: [
                                "**å®šç¾©èˆ‡ç”¨æ³•ï¼š** æè¿°æ™®éçœŸç†ã€äº‹å¯¦ã€ç¿’æ…£æ€§å‹•ä½œï¼Œæˆ–è¡¨ç¤ºä¸€å€‹æŒçºŒçš„ç‹€æ…‹ã€‚åœ¨æ™‚é–“æˆ–æ¢ä»¶å­å¥ä¸­ï¼Œå¸¸ç”¨ä¾†ä»£æ›¿æœªä¾†å¼ã€‚æè¿°è®ŠåŒ–çš„éç¨‹æˆ–è¶¨å‹¢æ™‚ï¼Œè‹¥éå¼·èª¿ç•¶ä¸‹æ­£åœ¨é€²è¡Œï¼Œä¹Ÿå¯ç”¨ä¸€èˆ¬ç¾åœ¨å¼ã€‚",
                                "**çµæ§‹ï¼š** åŸå½¢å‹•è©ï¼ˆç¬¬ä¸‰äººç¨±å–®æ•¸+s/esï¼‰ã€‚",
                                "**è€ƒé»ï¼š** æ³¨æ„ä¸»è©å–®è¤‡æ•¸èˆ‡å‹•è©çš„ä¸€è‡´æ€§ã€‚å€åˆ†æè¿°äº‹å¯¦/ç¿’æ…£èˆ‡æè¿°ç•¶ä¸‹é€²è¡Œçš„å‹•ä½œã€‚",
                                "**ä¾‹å¥ï¼š** As parts of the world **become** uninhabitable, millions will try to migrate. (æè¿°ä¸€å€‹è®ŠåŒ–çš„è¶¨å‹¢/äº‹å¯¦)"
                            ]
                        }
                    ],
                    exercises: [
                        {
                            question: "1. Mr. Evans ________ (work) for this company for ten years, and he plans to continue.",
                            options: ["(A) worked", "(B) has worked", "(C) works", "(D) is working"],
                            answer: 1 // Index of the correct option (0-based)
                        },
                        {
                            question: "2. The manager ________ (sign) the contract yesterday afternoon.",
                            options: ["(A) signed", "(B) has signed", "(C) signs", "(D) will sign"],
                            answer: 0
                        },
                         {
                            question: "3. If it ________ (rain) tomorrow, the picnic will be cancelled.",
                            options: ["(A) will rain", "(B) is raining", "(C) rains", "(D) rained"],
                            answer: 2
                        }
                    ]
                },
                {
                    id: "voice",
                    title: "ğŸ—£ï¸ å‹•è©èªæ…‹ (Active vs. Passive Voice)",
                    errorAnalysis: [
                        "æœªèƒ½åˆ¤æ–·ä¸»è©æ˜¯å‹•ä½œçš„åŸ·è¡Œè€…é‚„æ˜¯æ¥å—è€…ï¼Œå°è‡´ä¸»å‹•/è¢«å‹•èªæ…‹æ··æ·†ã€‚",
                        "åœ¨æƒ…æ…‹å‹•è© (Modal Verbs) å¾Œé¢ä½¿ç”¨è¢«å‹•èªæ…‹æ™‚ï¼Œçµæ§‹éŒ¯èª¤ (æ‡‰ç‚º modal + be + p.p.)ã€‚"
                    ],
                     rules: [
                        {
                            name: "ä¸»å‹•èªæ…‹ (Active Voice)",
                            details: [
                                "**å®šç¾©èˆ‡ç”¨æ³•ï¼š** ä¸»è©æ˜¯åŸ·è¡Œå‹•ä½œçš„äººæˆ–ç‰©ã€‚",
                                "**çµæ§‹ï¼š** ä¸»è© + å‹•è© + (å—è©)",
                                "**ä¾‹å¥ï¼š** The company **grants** employees stock options."
                            ]
                        },
                         {
                            name: "è¢«å‹•èªæ…‹ (Passive Voice)",
                            details: [
                                "**å®šç¾©èˆ‡ç”¨æ³•ï¼š** ä¸»è©æ˜¯æ¥å—å‹•ä½œçš„äººæˆ–ç‰©ã€‚é€šå¸¸ç”¨ä¾†å¼·èª¿å‹•ä½œçš„æ‰¿å—è€…ï¼Œæˆ–ç•¶åŸ·è¡Œè€…ä¸æ˜ã€ä¸é‡è¦æˆ–é¡¯è€Œæ˜“è¦‹æ™‚ã€‚",
                                "**çµæ§‹ï¼š** ä¸»è© + be å‹•è© (ä¾æ™‚æ…‹è®ŠåŒ–) + éå»åˆ†è© (p.p.) + (by + åŸ·è¡Œè€…)",
                                "**è€ƒé»ï¼š** åˆ¤æ–·ä¸»è©èˆ‡å‹•è©ä¹‹é–“çš„é—œä¿‚ã€‚æ³¨æ„ä¸åŒæ™‚æ…‹çš„è¢«å‹•èªæ…‹çµæ§‹ï¼ˆå¦‚éå»ç°¡å–®è¢«å‹•: was/were + p.p.; ç¾åœ¨ç°¡å–®è¢«å‹•: am/is/are + p.p.; æœªä¾†ç°¡å–®è¢«å‹•: will be + p.p.; ç¾åœ¨å®Œæˆè¢«å‹•: has/have been + p.p.; æƒ…æ…‹å‹•è©è¢«å‹•: modal + be + p.p.ï¼‰ã€‚",
                                "**ä¾‹å¥ï¼š** Mr. White **was nominated** for president in April 2015. It is essential that it **be shaken** first. His main goal will **be realized** in the near future."
                            ]
                        }
                    ],
                    exercises: [
                         {
                            question: "1. The new software ________ (develop) by the IT team last month.",
                            options: ["(A) developed", "(B) was developed", "(C) has developed", "(D) develops"],
                            answer: 1
                        },
                        {
                            question: "2. All participants ________ (require) to register before the deadline.",
                            options: ["(A) require", "(B) requires", "(C) are required", "(D) requiring"],
                            answer: 2
                        },
                         {
                            question: "3. This task must ________ (complete) by Friday.",
                            options: ["(A) complete", "(B) completed", "(C) be completed", "(D) completing"],
                            answer: 2
                        }
                    ]
                },
                {
                    id: "pos",
                    title: "ğŸ§© è©æ€§è¾¨åˆ¥èˆ‡æ‡‰ç”¨ (Parts of Speech)",
                     errorAnalysis: [
                        "åœ¨éœ€è¦åè©çš„ä½ç½®èª¤é¸å…¶ä»–è©æ€§ã€‚",
                        "åœ¨éœ€è¦å½¢å®¹è©ä¿®é£¾åè©çš„ä½ç½®èª¤é¸å…¶ä»–è©æ€§ã€‚",
                        "åœ¨éœ€è¦å‹•è©çš„ä½ç½®èª¤é¸å…¶ä»–è©æ€§ã€‚",
                        "åœ¨éœ€è¦å‰¯è©ä¿®é£¾å‹•è©æˆ–å½¢å®¹è©çš„ä½ç½®èª¤é¸å…¶ä»–è©æ€§ã€‚"
                    ],
                     rules: [
                        { name: "åè© (Noun)", details: ["è¡¨ç¤ºäººã€äº‹ã€åœ°ã€ç‰©ã€æ¦‚å¿µã€‚å¸¸ä½œä¸»è©ã€å—è©ã€è£œèªæˆ–ä»‹ç³»è©çš„å—è©ã€‚ (ä¾‹: knowledge, contribution, records)"] },
                        { name: "å‹•è© (Verb)", details: ["è¡¨ç¤ºå‹•ä½œæˆ–ç‹€æ…‹ã€‚ (ä¾‹: announced, demands, express)"] },
                        { name: "å½¢å®¹è© (Adjective)", details: ["ä¿®é£¾åè©æˆ–ä»£åè©ï¼Œèªªæ˜å…¶æ€§è³ªæˆ–ç‹€æ…‹ã€‚å¸¸æ”¾åœ¨åè©å‰æˆ– be å‹•è©/é€£ç¶´å‹•è©å¾Œã€‚ (ä¾‹: verifiable, intellectual, capable, versatile, frustrating, diverse)"] },
                        { name: "å‰¯è© (Adverb)", details: ["ä¿®é£¾å‹•è©ã€å½¢å®¹è©ã€å…¶ä»–å‰¯è©æˆ–æ•´å€‹å¥å­ï¼Œèªªæ˜æ™‚é–“ã€åœ°é»ã€æ–¹å¼ã€ç¨‹åº¦ç­‰ã€‚ (ä¾‹: properly, closely, perfectly, meanwhile)"] },
                        { name: "ğŸ¯ è€ƒè©¦é‡é»", details: [
                            "åˆ†æå¥å­çµæ§‹ï¼Œåˆ¤æ–·ç©ºæ ¼è™•æ‡‰å¡«å…¥å“ªç¨®è©æ€§çš„è©ã€‚",
                            "æ³¨æ„è©å°¾è®ŠåŒ–ï¼ˆå¦‚ -tion, -ment, -ness å¸¸ç‚ºåè©ï¼›-able, -ible, -ive, -al, -ous å¸¸ç‚ºå½¢å®¹è©ï¼›-ly å¸¸ç‚ºå‰¯è©ï¼‰ã€‚",
                            "æ ¹æ“šèªæ„é¸æ“‡æœ€æ°ç•¶çš„è©ã€‚"
                        ]}
                    ],
                    exercises: [
                        {
                            question: "1. The company needs to improve its ________ (efficient).",
                            options: ["(A) efficient", "(B) efficiently", "(C) efficiency", "(D) efficients"],
                            answer: 2
                        },
                        {
                            question: "2. Please handle these documents ________ (careful).",
                            options: ["(A) careful", "(B) carefully", "(C) care", "(D) caring"],
                            answer: 1
                        },
                         {
                            question: "3. This is a highly ________ (compete) market.",
                            options: ["(A) compete", "(B) competitive", "(C) competition", "(D) competitively"],
                            answer: 1
                        }
                    ]
                },
                 {
                    id: "adjectives",
                    title: "âœ¨ å½¢å®¹è©ç”¨æ³• (Adjective Usage)",
                    errorAnalysis: [
                        "æœªèƒ½æ ¹æ“šèªæ„é¸æ“‡æœ€åˆé©çš„å½¢å®¹è©ã€‚",
                        "æ··æ·† -ing å½¢å®¹è©ï¼ˆä»¤äºº...çš„ï¼‰å’Œ -ed å½¢å®¹è©ï¼ˆæ„Ÿåˆ°...çš„ï¼‰ã€‚",
                        "ä¸¦åˆ—å½¢å®¹è©å½¢å¼æœªèƒ½ä¿æŒä¸€è‡´ã€‚"
                    ],
                    rules: [
                         { name: "å½¢å®¹è©åŠŸèƒ½", details: ["ä¿®é£¾åè©æˆ–ä»£åè©ï¼Œæè¿°å…¶ç‰¹å¾µã€ç‹€æ…‹ã€‚"] },
                         { name: "ä½ç½®", details: ["é€šå¸¸æ”¾åœ¨åè©å‰ï¼Œæˆ– be å‹•è©/é€£ç¶´å‹•è© (appear, seem, become, feel, look, sound, taste, smell) ä¹‹å¾Œä½œä¸»è©è£œèªã€‚"] },
                         { name: "-ing vs. -ed å½¢å®¹è©", details: [
                             "**-ing å½¢å®¹è©ï¼š** æè¿°äº‹ç‰©æˆ–äººçš„ç‰¹è³ªï¼Œå¸¶æœ‰ã€Œä»¤äºº...çš„ã€æ„æ€ (e.g., interesting book, boring movie, frustrating season)ã€‚",
                             "**-ed å½¢å®¹è©ï¼š** æè¿°äººï¼ˆæœ‰æ™‚æ˜¯å‹•ç‰©ï¼‰çš„æ„Ÿå—ï¼Œå¸¶æœ‰ã€Œæ„Ÿåˆ°...çš„ã€æ„æ€ (e.g., interested student, bored audience, frustrated player)ã€‚"
                         ]},
                         { name: "ä¸¦åˆ—å½¢å®¹è©", details: ["ç•¶å¤šå€‹å½¢å®¹è©ä¿®é£¾åŒä¸€å€‹åè©æ™‚ï¼Œå®ƒå€‘é€šå¸¸å½¢å¼ä¸€è‡´ã€‚"] },
                         { name: "ğŸ¯ è€ƒé»", details: [
                             "æ ¹æ“šä¸Šä¸‹æ–‡èªæ„é¸æ“‡æœ€è²¼åˆ‡çš„å½¢å®¹è©ã€‚",
                             "æ­£ç¢ºå€åˆ† -ing å’Œ -ed å½¢å®¹è©çš„ç”¨æ³•ã€‚",
                             "æ³¨æ„å½¢å®¹è©åœ¨å¥ä¸­çš„ä½ç½®ã€‚"
                         ]}
                    ],
                    exercises: [
                        {
                            question: "1. The presentation was very ________ (inform). Everyone learned a lot.",
                            options: ["(A) informed", "(B) informing", "(C) informative", "(D) information"],
                            answer: 2
                        },
                        {
                            question: "2. I was ________ (surprise) to see him at the party.",
                            options: ["(A) surprised", "(B) surprising", "(C) surprise", "(D) surprisingly"],
                            answer: 0
                        },
                         {
                            question: "3. We need someone who is reliable, experienced, and ________ (dedicate).",
                            options: ["(A) dedicate", "(B) dedicating", "(C) dedicated", "(D) dedication"],
                            answer: 2
                        }
                    ]
                },
                 {
                    id: "adverbs",
                    title: "ğŸš€ å‰¯è©ç”¨æ³• (Adverb Usage)",
                    errorAnalysis: [
                        "æœªèƒ½æ ¹æ“šèªæ„é¸æ“‡æœ€åˆé©çš„å‰¯è©ä¾†ä¿®é£¾å‹•è©ã€‚",
                        "æœªèƒ½é¸æ“‡åˆé©çš„è½‰æŠ˜/é€£æ¥å‰¯è©ä¾†è¡¨é”å¥é–“é‚è¼¯ã€‚"
                    ],
                    rules: [
                        { name: "å‰¯è©åŠŸèƒ½", details: ["ä¿®é£¾å‹•è©ï¼ˆèªªæ˜å‹•ä½œå¦‚ä½•ç™¼ç”Ÿï¼‰ã€å½¢å®¹è©ï¼ˆåŠ å¼·èªæ°£ï¼‰ã€å…¶ä»–å‰¯è©ï¼ˆåŠ å¼·èªæ°£ï¼‰æˆ–æ•´å€‹å¥å­ã€‚"] },
                        { name: "å¸¸è¦‹ç¨®é¡", details: [
                            "**æ–¹å¼å‰¯è© (How?)**: carefully, slowly, quickly, properly, closely, perfectly",
                            "**æ™‚é–“å‰¯è© (When?)**: now, then, yesterday, soon, already, recently",
                            "**åœ°é»å‰¯è© (Where?)**: here, there, nearby, everywhere",
                            "**é »ç‡å‰¯è© (How often?)**: always, usually, often, sometimes, never",
                            "**ç¨‹åº¦å‰¯è© (To what extent?)**: very, quite, too, extremely, considerably, nearly",
                            "**é€£æ¥å‰¯è© (Connecting ideas)**: however, therefore, moreover, meanwhile, furthermore, consequently"
                        ]},
                         { name: "ğŸ¯ è€ƒé»", details: [
                            "æ ¹æ“šéœ€è¦ä¿®é£¾çš„è©èªå’Œèªæ„é¸æ“‡æ­£ç¢ºçš„å‰¯è©ã€‚",
                            "æ³¨æ„å‰¯è©åœ¨å¥ä¸­çš„ä½ç½®ã€‚",
                            "å€åˆ†å½¢å®¹è©å’Œå‰¯è©ã€‚"
                         ]}
                    ],
                    exercises: [
                         {
                            question: "1. She adapted ________ (quick) to the new environment.",
                            options: ["(A) quick", "(B) quicker", "(C) quickly", "(D) quickness"],
                            answer: 2
                        },
                        {
                            question: "2. The report was ________ well-written.",
                            options: ["(A) extreme", "(B) extremely", "(C) extremity", "(D) extremer"],
                            answer: 1
                        },
                         {
                            question: "3. He didn't study hard; ________, he failed the exam.",
                            options: ["(A) moreover", "(B) therefore", "(C) however", "(D) meanwhile"],
                            answer: 1 // Assuming 'therefore' is the intended answer for cause/effect
                        }
                    ]
                },
                {
                    id: "conjunctions-prepositions",
                    title: "ğŸ”— é€£æ¥è©èˆ‡ä»‹ç³»è© (Conjunctions & Prepositions)",
                    errorAnalysis: [
                        "æ··æ·†é€£æ¥è©ï¼ˆé€£æ¥å­å¥ï¼‰å’Œä»‹ç³»è©ï¼ˆå¾Œæ¥åè©/åè©ç‰‡èª/å‹•åè©ï¼‰ã€‚",
                        "æœªèƒ½æ ¹æ“šå­å¥é–“çš„é‚è¼¯é—œä¿‚é¸æ“‡æ­£ç¢ºçš„é€£æ¥è©ã€‚",
                        "æœªèƒ½ä½¿ç”¨æ­£ç¢ºçš„é€£æ¥è©é€£æ¥è©èªã€‚",
                        "æœªèƒ½ä½¿ç”¨æ­£ç¢ºçš„ä»‹ç³»è©æˆ–å›ºå®šæ­é…ã€‚"
                    ],
                    rules: [
                        { name: "é€£æ¥è© (Conjunctions)", details: [
                            "**åŠŸèƒ½ï¼š** é€£æ¥å–®å­—ã€ç‰‡èªæˆ–å­å¥ã€‚",
                            "**å°ç­‰é€£æ¥è© (Coordinating):** é€£æ¥èªæ³•çµæ§‹ç›¸åŒçš„æˆåˆ† (e.g., and, but, or, so, for, nor, yet)ã€‚",
                            "**å¾å±¬é€£æ¥è© (Subordinating):** å¼•å°å¾å±¬å­å¥ï¼Œè¡¨é”æ™‚é–“ (when, while, before, after), åŸå›  (because, since, as), æ¢ä»¶ (if, unless), å°æ¯”/è®“æ­¥ (although, though, even though, while), ç›®çš„ (so that, in order that), çµæœ (so...that, such...that)ã€‚ **æ³¨æ„ï¼šå¾å±¬é€£æ¥è©å¾Œé¢å¿…é ˆæ¥ä¸€å€‹å®Œæ•´çš„å­å¥ï¼ˆä¸»è©+å‹•è©ï¼‰ã€‚**"
                        ]},
                        { name: "ä»‹ç³»è© (Prepositions)", details: [
                             "**åŠŸèƒ½ï¼š** è¡¨ç¤ºå…¶å¾Œçš„åè©ã€ä»£åè©æˆ–å‹•åè©èˆ‡å¥å­ä¸­å…¶ä»–è©èªçš„é—œä¿‚ï¼ˆæ™‚é–“ã€åœ°é»ã€æ–¹å‘ã€åŸå› ã€æ–¹å¼ç­‰ï¼‰ã€‚",
                             "**å¸¸è¦‹ä»‹ç³»è©ï¼š** in, on, at, for, with, to, from, about, over, under, beside, between, against, despite, in spite ofã€‚",
                             "**æ³¨æ„ï¼šä»‹ç³»è©å¾Œé¢å¿…é ˆæ¥åè©ã€ä»£åè©æˆ–å‹•åè© (V-ing)ã€‚**"
                        ]},
                        { name: "å›ºå®šæ­é… (Collocations)", details: ["å¾ˆå¤šå‹•è©ã€åè©ã€å½¢å®¹è©å¸¸èˆ‡ç‰¹å®šçš„ä»‹ç³»è©æ­é…ï¼Œéœ€è¦è¨˜æ†¶ã€‚ (e.g., contribute *to*, responsible *for*, capable *of*, interested *in*, depend *on*, campaign *against*, in accordance *with*, between A *and* B, time *for* sth)"] },
                         { name: "ğŸ¯ è€ƒé»", details: [
                            "åˆ¤æ–·ç©ºæ ¼å¾Œæ˜¯å­å¥é‚„æ˜¯åè©/ç‰‡èªï¼Œæ±ºå®šç”¨é€£æ¥è©é‚„æ˜¯ä»‹ç³»è©ã€‚",
                            "æ ¹æ“šé‚è¼¯é—œä¿‚é¸æ“‡æ­£ç¢ºçš„é€£æ¥è©ã€‚",
                            "ç†Ÿæ‚‰ä»‹ç³»è©çš„æ„ç¾©å’Œå›ºå®šæ­é…ã€‚"
                         ]}
                    ],
                    exercises: [
                        {
                            question: "1. ________ the bad weather, the flight was cancelled.",
                            options: ["(A) Although", "(B) Because", "(C) Due to", "(D) Since"],
                            answer: 2
                        },
                        {
                            question: "2. You cannot enter the building ________ you have a valid ID card.",
                            options: ["(A) if", "(B) unless", "(C) because", "(D) while"],
                            answer: 1
                        },
                         {
                            question: "3. She is very good ________ playing the piano.",
                            options: ["(A) in", "(B) on", "(C) with", "(D) at"],
                            answer: 3
                        }
                    ]
                },
                {
                    id: "other",
                    title: "ğŸ¯ å…¶ä»–é‡è¦æ–‡æ³•é»",
                    errorAnalysis: [], // Keep it simple for this section
                    rules: [
                        { name: "å‡è¨­èªæ°£ (Conditionals - Past Unreal)", details: ["**è¦å‰‡ï¼š** If + ä¸»è© + had + p.p., ä¸»è© + would/could/might + have + p.p.", "**ä¾‹å¥ï¼š** If they **had asked** earlier, it **would have been** more successful."] },
                        { name: "ä¸»è©å‹•è©ä¸€è‡´æ€§ (Subject-Verb Agreement)", details: ["**è¦å‰‡ï¼š** å‹•åè©ç‰‡èª (Gerund phrase) ä½œä¸»è©æ™‚ï¼Œè¦–ç‚ºå–®æ•¸ã€‚", "**ä¾‹å¥ï¼š** **Catering** to the tastes... **demands** a great deal of skill."] },
                        { name: "ä½¿å½¹å‹•è© (Causative Verbs)", details: ["**è¦å‰‡ï¼š** make/have/let + å—è© + åŸå½¢å‹•è© (V)ã€‚ (Get + å—è© + to + V)", "**ä¾‹å¥ï¼š** Jack Ma's words **made** the audience **cheer**."] },
                        { name: "ä¸å®šè©è¡¨ç›®çš„ (Infinitives of Purpose)", details: ["**è¦å‰‡ï¼š** ä¸å®šè©å¯ç”¨ä¾†è¡¨ç¤ºå‹•ä½œçš„ç›®çš„æˆ–åŸå› ã€‚", "**ä¾‹å¥ï¼š** The policy **to regulate** the fishing industry..."] },
                        { name: "ä»£åè©æ ¼ä½ (Pronoun Case)", details: ["**è¦å‰‡ï¼š** ä¸»æ ¼ (I, he, she, we, they) ä½œä¸»è©ï¼›å—æ ¼ (me, him, her, us, them) ä½œå‹•è©æˆ–ä»‹ç³»è©çš„å—è©ã€‚", "**ä¾‹å¥ï¼š** ...we may not treat **them** to a dinner."] },
                        { name: "é™å®šè© (Determiners)", details: ["**è¦å‰‡ï¼š** All + è¤‡æ•¸åè©/ä¸å¯æ•¸åè©ï¼›Every/Each + å–®æ•¸åè©ã€‚Each of + è¤‡æ•¸åè© + å–®æ•¸å‹•è©ã€‚", "**ä¾‹å¥ï¼š** ...workers must receive proper **all** safety training... **Each** of our tour packages **includes**..."] },
                        { name: "åˆ†è©ä½œå½¢å®¹è© (Participles as Adjectives)", details: ["**è¦å‰‡ï¼š** ç¾åœ¨åˆ†è© (-ing) è¡¨ç¤ºä¸»å‹•æˆ–é€²è¡Œï¼›éå»åˆ†è© (-ed) è¡¨ç¤ºè¢«å‹•æˆ–å®Œæˆã€‚", "**ä¾‹å¥ï¼š** ...this idea proposal is **submitted** gratuitously... ...employers... will be **conducting** interviews..."] }
                    ],
                    exercises: [] // No exercises for the 'other' section in this example
                },
                {
                   id: "vocab",
                   title: "ğŸ§  è©å½™èˆ‡æ–‡æ„ç†è§£",
                   errorAnalysis: ["å¤šæ¬¡éŒ¯èª¤ä¾†è‡ªæ–¼æœªèƒ½æ ¹æ“šä¸Šä¸‹æ–‡é¸æ“‡æœ€ç¬¦åˆèªæ„é‚è¼¯çš„è©å½™æˆ–å¥å­ã€‚"],
                   rules: [
                       { name: "ğŸ’¡ å­¸ç¿’å»ºè­°", details: [
                           "**æ“´å……è©å½™é‡ï¼š** æŒçºŒèƒŒèª¦å¤šç›Šå¸¸è¦‹å–®å­—ï¼Œç‰¹åˆ¥æ˜¯å•†æ¥­ã€è¾¦å…¬å®¤ã€æ—…éŠã€è³¼ç‰©ç­‰æƒ…å¢ƒçš„è©å½™ã€‚",
                           "**æ³¨æ„è©èªæ­é…ï¼š** å­¸ç¿’å¸¸è¦‹çš„å‹•è©+åè©ã€å½¢å®¹è©+åè©ã€å‹•è©+ä»‹ç³»è©ç­‰æ­é…ã€‚",
                           "**ä¸Šä¸‹æ–‡æ¨æ•²ï¼š** ç·´ç¿’å¾å‰å¾Œæ–‡æ¨æ¸¬è©ç¾©æˆ–å¥å­æ¶µç¾©ã€‚",
                           "**é‚è¼¯åˆ¤æ–·ï¼š** é–±è®€é¡Œç›®æ™‚ï¼Œæ€è€ƒé¸é …æ˜¯å¦ç¬¦åˆæ•´å¥è©±æˆ–æ•´æ®µæ–‡ç« çš„é‚è¼¯ã€‚"
                       ]}
                   ],
                   exercises: []
                }
            ],
            summary: [
                "**â° æ™‚æ…‹æº–ç¢ºæ€§ï¼š** å¯†åˆ‡æ³¨æ„æ™‚é–“å‰¯è©ï¼Œåˆ¤æ–·å‹•ä½œç™¼ç”Ÿçš„æ™‚é–“é»æˆ–æ™‚é–“æ®µï¼Œæ­£ç¢ºé¸ç”¨ç°¡å–®å¼æˆ–å®Œæˆå¼ã€‚",
                "**ğŸ—£ï¸ èªæ…‹åˆ¤æ–·ï¼š** åˆ†è¾¨ä¸»è©æ˜¯åŸ·è¡Œè€…é‚„æ˜¯æ¥å—è€…ï¼Œæ­£ç¢ºä½¿ç”¨ä¸»å‹•æˆ–è¢«å‹•èªæ…‹ï¼Œç‰¹åˆ¥æ³¨æ„è¢«å‹•èªæ…‹çš„çµæ§‹ (be + p.p.)ã€‚",
                "**ğŸ§© è©æ€§è¾¨è­˜ï¼š** æ ¹æ“šå¥å­çµæ§‹ï¼ˆä¸»è©ã€å‹•è©ã€å—è©ã€ä¿®é£¾èªï¼‰åˆ¤æ–·æ‰€éœ€è©æ€§ï¼Œæ³¨æ„è©å°¾è®ŠåŒ–ã€‚",
                "**âœ¨ å½¢å®¹è©/ğŸš€ å‰¯è©å€åˆ†ï¼š** å½¢å®¹è©ä¿®é£¾åè©/ä»£åè©ï¼›å‰¯è©ä¿®é£¾å‹•è©/å½¢å®¹è©/å‰¯è©/å¥å­ã€‚æ³¨æ„ -ing/-ed å½¢å®¹è©ç”¨æ³•ã€‚",
                "**ğŸ”— é€£æ¥è© vs. ä»‹ç³»è©ï¼š** é€£æ¥è©å¾Œæ¥å­å¥ï¼ˆä¸»è©+å‹•è©ï¼‰ï¼›ä»‹ç³»è©å¾Œæ¥åè©/ä»£åè©/å‹•åè©ã€‚æ ¹æ“šé‚è¼¯é—œä¿‚å’Œå›ºå®šæ­é…é¸ç”¨ã€‚",
                "**ğŸ“š å›ºå®šæ­é…èˆ‡è©å½™ï¼š** åŠ å¼·è¨˜æ†¶å¸¸è¦‹çš„è©èªæ­é… (å‹•è©+ä»‹ç³»è©ç­‰) å’Œæ ¸å¿ƒè©å½™ï¼Œæå‡æ–‡æ„ç†è§£èƒ½åŠ›ã€‚",
                "**ğŸ¯ ç´°ç¯€è¦å‰‡ï¼š** ç•™æ„å‡è¨­èªæ°£ã€ä¸»è©å‹•è©ä¸€è‡´ã€ä½¿å½¹å‹•è©ã€ä¸å®šè©ã€ä»£åè©æ ¼ä½ã€é™å®šè©ã€åˆ†è©ç­‰ç‰¹å®šè¦å‰‡ã€‚"
            ]
        };

        // --- DOM Elements ---
        const sectionSelect = document.getElementById('section-select');
        const contentArea = document.getElementById('content-area');
        const summaryArea = document.getElementById('summary-area');
        const summaryList = document.getElementById('summary-list');

        // --- State ---
        let currentSectionId = learningData.sections[0].id;
        let exerciseStates = {}; // Store state for each exercise { selectedOption: null, answered: false }

        // --- Functions ---

        // Populate navigation dropdown
        function populateNav() {
            learningData.sections.forEach(section => {
                const option = document.createElement('option');
                option.value = section.id;
                option.textContent = section.title;
                sectionSelect.appendChild(option);
            });
            // Add summary option
            const summaryOption = document.createElement('option');
            summaryOption.value = 'summary';
            summaryOption.textContent = 'ğŸ’¡ é‡é»ç¸½çµ';
            sectionSelect.appendChild(summaryOption);
        }

        // Render content for the selected section
        function renderContent(sectionId) {
            contentArea.innerHTML = ''; // Clear previous content
            summaryArea.classList.add('hidden'); // Hide summary

            if (sectionId === 'summary') {
                renderSummary();
                return; // Stop here if summary is selected
            }

            const section = learningData.sections.find(s => s.id === sectionId);
            if (!section) return;

            // Reset exercise states for the new section
            exerciseStates[sectionId] = section.exercises.map(() => ({ selectedOption: null, answered: false }));


            // Section Title
            const title = document.createElement('h2');
            title.className = 'text-2xl font-bold mb-6 text-center';
            title.textContent = section.title;
            contentArea.appendChild(title);

            // Error Analysis Card
            if (section.errorAnalysis && section.errorAnalysis.length > 0) {
                const errorCard = document.createElement('div');
                errorCard.className = 'card bg-red-50 border-red-200';
                errorCard.innerHTML = `
                    <h3 class="text-xl font-bold mb-3 text-red-700 flex items-center"><span class="lucide mr-2">âš ï¸</span>æ‚¨çš„éŒ¯èª¤é»åˆ†æ</h3>
                    <ul class="list-disc pl-5 space-y-1 text-red-800">
                        ${section.errorAnalysis.map(err => `<li>${err}</li>`).join('')}
                    </ul>
                `;
                contentArea.appendChild(errorCard);
            }

            // Rules Card
            if (section.rules && section.rules.length > 0) {
                const rulesCard = document.createElement('div');
                rulesCard.className = 'card';
                rulesCard.innerHTML = `<h3 class="text-xl font-bold mb-4 flex items-center"><span class="lucide mr-2">ğŸ“–</span>æ–‡æ³•è¦å‰‡è©³è§£</h3>`;
                section.rules.forEach(rule => {
                    const ruleDiv = document.createElement('div');
                    ruleDiv.className = 'mb-4 pb-4 border-b border-duo-gray last:border-b-0';
                    ruleDiv.innerHTML = `
                        <h4 class="font-semibold text-lg mb-2 text-duo-blue">${rule.name}</h4>
                        <ul class="list-disc pl-5 space-y-1 text-sm">
                           ${rule.details.map(det => `<li>${det.replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold">$1</strong>')}</li>`).join('')}
                        </ul>
                    `;
                    rulesCard.appendChild(ruleDiv);
                });
                contentArea.appendChild(rulesCard);
            }

            // Exercises Card
            if (section.exercises && section.exercises.length > 0) {
                const exercisesCard = document.createElement('div');
                exercisesCard.className = 'card';
                exercisesCard.innerHTML = `<h3 class="text-xl font-bold mb-4 flex items-center"><span class="lucide mr-2">ğŸ“</span>ç·´ç¿’é¡Œ</h3>`;
                section.exercises.forEach((exercise, index) => {
                    const exerciseDiv = document.createElement('div');
                    exerciseDiv.id = `exercise-${sectionId}-${index}`;
                    exerciseDiv.className = 'mb-6 pb-6 border-b border-duo-gray last:border-b-0';
                    exerciseDiv.innerHTML = `
                        <p class="font-semibold mb-4">${exercise.question}</p>
                        <div class="space-y-3">
                            ${exercise.options.map((option, optionIndex) => `
                                <button
                                    class="btn btn-secondary option-btn"
                                    data-section="${sectionId}"
                                    data-exercise="${index}"
                                    data-option="${optionIndex}">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                        <div class="feedback-container mt-4"></div> <button class="btn btn-primary check-btn mt-4 btn-disabled" disabled data-section="${sectionId}" data-exercise="${index}">æª¢æŸ¥ç­”æ¡ˆ</button>
                    `;
                    exercisesCard.appendChild(exerciseDiv);
                });
                contentArea.appendChild(exercisesCard);
            }
        }

        // Render Summary
        function renderSummary() {
             summaryList.innerHTML = learningData.summary
                .map(point => `<li>${point.replace(/\*\*(.*?)\*\*/g, '<strong class="font-semibold">$1</strong>')}</li>`)
                .join('');
             summaryArea.classList.remove('hidden');
        }


        // Handle option selection
        function handleOptionSelect(event) {
            const button = event.target.closest('.option-btn');
            if (!button) return;

            const sectionId = button.dataset.section;
            const exerciseIndex = parseInt(button.dataset.exercise);
            const optionIndex = parseInt(button.dataset.option);

            // Prevent changing answer after checking
            if (exerciseStates[sectionId][exerciseIndex].answered) return;

            // Update state
            exerciseStates[sectionId][exerciseIndex].selectedOption = optionIndex;

            // Update UI
            const exerciseContainer = document.getElementById(`exercise-${sectionId}-${exerciseIndex}`);
            const optionButtons = exerciseContainer.querySelectorAll('.option-btn');
            const checkButton = exerciseContainer.querySelector('.check-btn');

            optionButtons.forEach(btn => btn.classList.remove('option-selected'));
            button.classList.add('option-selected');

            // Enable check button
            checkButton.disabled = false;
            checkButton.classList.remove('btn-disabled');
            checkButton.classList.add('btn-primary');
        }

        // Handle check answer
        function handleCheckAnswer(event) {
            const button = event.target.closest('.check-btn');
            if (!button || button.disabled) return;

            const sectionId = button.dataset.section;
            const exerciseIndex = parseInt(button.dataset.exercise);

            const section = learningData.sections.find(s => s.id === sectionId);
            const exercise = section.exercises[exerciseIndex];
            const state = exerciseStates[sectionId][exerciseIndex];
            const selectedOptionIndex = state.selectedOption;
            const correctAnswerIndex = exercise.answer;

            // Mark as answered
            state.answered = true;

            const exerciseContainer = document.getElementById(`exercise-${sectionId}-${exerciseIndex}`);
            const optionButtons = exerciseContainer.querySelectorAll('.option-btn');
            const feedbackContainer = exerciseContainer.querySelector('.feedback-container');

            // Disable option buttons and check button
            optionButtons.forEach(btn => btn.disabled = true);
            button.disabled = true;
            button.classList.add('btn-disabled');
            button.classList.remove('btn-primary');


            // Provide feedback
            feedbackContainer.innerHTML = ''; // Clear previous feedback
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = 'feedback';

            if (selectedOptionIndex === correctAnswerIndex) {
                feedbackDiv.classList.add('feedback-correct');
                feedbackDiv.innerHTML = '<span class="lucide mr-1">âœ…</span>åšå¾—å¥½ï¼';
                // Highlight selected (correct) option
                 optionButtons[selectedOptionIndex].classList.add('option-correct');
                 optionButtons[selectedOptionIndex].classList.remove('option-selected', 'btn-secondary');

            } else {
                feedbackDiv.classList.add('feedback-incorrect');
                feedbackDiv.innerHTML = `<span class="lucide mr-1">âŒ</span>æ­£ç¢ºç­”æ¡ˆï¼š${exercise.options[correctAnswerIndex]}`;
                 // Highlight selected (incorrect) option in red
                if (selectedOptionIndex !== null) {
                    optionButtons[selectedOptionIndex].classList.add('option-incorrect');
                    optionButtons[selectedOptionIndex].classList.remove('option-selected', 'btn-secondary');
                }
                 // Highlight correct option in green
                 optionButtons[correctAnswerIndex].classList.add('option-correct');
                 optionButtons[correctAnswerIndex].classList.remove('btn-secondary');
            }
            feedbackContainer.appendChild(feedbackDiv);

             // Remove selected style from non-correct/non-incorrect buttons if needed
             optionButtons.forEach((btn, index) => {
                if (index !== selectedOptionIndex && index !== correctAnswerIndex) {
                     btn.classList.remove('option-selected');
                }
             });
        }

        // --- Event Listeners ---
        sectionSelect.addEventListener('change', (event) => {
            currentSectionId = event.target.value;
            renderContent(currentSectionId);
            window.scrollTo(0, 0); // Scroll to top on section change
        });

        // Use event delegation for exercise buttons
        contentArea.addEventListener('click', (event) => {
            if (event.target.closest('.option-btn')) {
                handleOptionSelect(event);
            } else if (event.target.closest('.check-btn')) {
                handleCheckAnswer(event);
            }
        });


        // --- Initial Load ---
        populateNav();
        renderContent(currentSectionId); // Render the first section initially

    </script>

</body>
</html>
